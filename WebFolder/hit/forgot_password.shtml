<!DOCTYPE html>
<html class="login-bg">
<head>
	<title>Detail Admin - Forgot Password</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <!-- bootstrap -->
    <link href="css/bootstrap/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/bootstrap/bootstrap-overrides.css" type="text/css" rel="stylesheet">

    <!-- global styles -->
    <link rel="stylesheet" type="text/css" href="css/layout.css">
    <link rel="stylesheet" type="text/css" href="css/elements.css">
    <link rel="stylesheet" type="text/css" href="css/icons.css">

    <!-- libraries -->
    <link rel="stylesheet" type="text/css" href="css/lib/font-awesome.css">
    
    <!-- this page specific styles -->
    <link rel="stylesheet" href="css/compiled/signup.css" type="text/css" media="screen" />

    <!-- open sans font -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
#form-auth em.error {
	margin-left: 10px;
	width: auto;
	display: inline;
}
#form-auth em.error {
    color: red;
    font-style: italic;
}
#form-auth input.error, textarea.error, select.error{
    border: 1px solid red;
}

</style>
</head>
<body>
    <div class="header">
        <a href="index.html">
            <img src="img/logo.png" class="logo" />
        </a>
    </div>
    <form id="form-auth" method="post" action="forgotpassword.cgi">
    <div class="row-fluid login-wrapper">
        <div class="box">
            <div class="content-wrap">
                <h6>Can't sign in?</h6>
                <!--HIT_EXECUTE

 
Case of 

:(_HIT_WebApp_GetField ("msg")="success")
_HIT_HTMLTXT:="<span style='color:#006600'>You Password Reset Link has been sent successfully ! Please Check your Mail</span>"

:(_HIT_WebApp_GetField ("msg")="mailerror")
_HIT_HTMLTXT:="<span style='color:#006600'>Email did not send. PLease try Again Later</span>"

:(_HIT_WebApp_GetField ("msg")="error")
_HIT_HTMLTXT:="<span style='color:#FF0000'>You are not registred with us. Please Contact Tenthmatrix</span>"

End case 
 
-->
                <div><input class="span12 displaymsg" type="text" name="req_email" id="req_email" placeholder="E-mail address"></div>
                <div class="action">
                	<input type="submit" id="r_btn" class="btn-glow primary" value="Request Reset Password">
                	<!--<a class="btn-glow primary login" href="javascript:$('#form-auth').submit()">Request Reset Password</a>
                     <a class="btn-glow primary signup" href="#">Request Reset Password</a> -->
                </div>                
            </div>
        </div>
 
    </div>
	</form>
	<!-- scripts -->
    <script src="js/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/theme.js"></script>
    
	<script src="js/jquery.validate.js"></script>
	<script type="text/javascript">
	$(function () {
		$("#form-auth").validate({
			ignore: "",
			errorClass: 'error',
			validClass: 'valid',
			errorElement: "em",
			errorPlacement: function(error, element) {
				$(element).closest('div').append(error);
			},
			onfocusout: false,
			invalidHandler: function(form, validator) {
				var errors = validator.numberOfInvalids();
				if (errors) {                    
					validator.errorList[0].element.focus();
				}
			},
			rules: {
				req_email: { required: true, email: true },
			},
			submitHandler: function(validator, form, submitButton) {
				$("#msgID").remove();	
				var datastr="forgotpassword.cgi?req_email="+$('#req_email').val()+'&req_from=CRM';
				$.getJSON(datastr,function(response){
					if(response.success){
						$("#req_email").val("");
						var msgStr="<span id='msgID' style='color:#006600'>"+response.success+"</span>";
						$(".displaymsg").before(msgStr);
						$('#req_email').hide();
						$('#r_btn').attr('disabled','disabled');
					}
					if(response.error){
						var msgStr="<span id='msgID' style='color:#a94442'>"+response.error+"</span>";
						$(".displaymsg").before(msgStr);	
					}
				});
  			}
		});	
	});
	</script>
</body>
</html>