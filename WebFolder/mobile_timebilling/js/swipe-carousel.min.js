/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
window.matchMedia=window.matchMedia||(function(e,f){var c,a=e.documentElement,b=a.firstElementChild||a.firstChild,d=e.createElement("body"),g=e.createElement("div");g.id="mq-test-1";g.style.cssText="position:absolute;top:-100em";d.appendChild(g);return function(h){g.innerHTML='&shy;<style media="'+h+'"> #mq-test-1 { width: 42px; }</style>';a.insertBefore(d,b);c=g.offsetWidth==42;a.removeChild(d);return{matches:c,media:h}}})(document);

// picturefill - http://github.com/scottjehl/picturefill/
(function(a){a.picturefill=function(){for(var d=a.document.getElementsByTagName("div"),c=0,h=d.length;c<h;c++)if(null!==d[c].getAttribute("data-picture")){for(var b=d[c].getElementsByTagName("div"),f=[],e=0,i=b.length;e<i;e++){var g=b[e].getAttribute("data-media");(!g||a.matchMedia&&a.matchMedia(g).matches)&&f.push(b[e])}b=d[c].getElementsByTagName("img")[0];f.length?(b||(b=a.document.createElement("img"),b.alt=d[c].getAttribute("data-alt"),d[c].appendChild(b)),b.src=f.pop().getAttribute("data-src")):
b&&d[c].removeChild(b)}};a.addEventListener?(a.addEventListener("resize",a.picturefill,!1),a.addEventListener("DOMContentLoaded",function(){a.picturefill();a.removeEventListener("load",a.picturefill,!1)},!1),a.addEventListener("load",a.picturefill,!1)):a.attachEvent&&a.attachEvent("onload",a.picturefill)})(this);

// Swipe 1.0 - http://swipejs.com/
window.Swipe=function(a,b){if(!a)return null;this.options=b||{};this.index=this.options.startSlide||0;this.speed=this.options.speed||300;this.callback=this.options.callback||function(){};this.delay=this.options.auto||0;this.container=a;this.element=this.container.children[0];this.container.style.overflow="hidden";this.element.style.listStyle="none";this.setup();this.begin();this.element.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",
this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1))};
Swipe.prototype={setup:function(){this.slides=this.element.children;this.length=this.slides.length;if(2>this.length)return null;this.width=this.container.getBoundingClientRect().width;if(!this.width)return null;this.container.style.visibility="hidden";this.element.style.width=this.slides.length*this.width+"px";for(var a=this.slides.length;a--;){var b=this.slides[a];b.style.width=this.width+"px";b.style.display="table-cell";b.style.verticalAlign="top"}this.slide(this.index,0);this.container.style.visibility=
"visible"},slide:function(a,b){var c=this.element.style;void 0==b&&(b=this.speed);c.webkitTransitionDuration=c.MozTransitionDuration=c.msTransitionDuration=c.OTransitionDuration=c.transitionDuration=b+"ms";c.MozTransform=c.webkitTransform="translate3d("+-(a*this.width)+"px,0,0)";c.msTransform=c.OTransform="translateX("+-(a*this.width)+"px)";this.index=a},getPos:function(){return this.index},prev:function(a){this.delay=a||0;clearTimeout(this.interval);this.index&&this.slide(this.index-1,this.speed)},
next:function(a){this.delay=a||0;clearTimeout(this.interval);this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},begin:function(){var a=this;this.interval=this.delay?setTimeout(function(){a.next(a.delay)},this.delay):0},stop:function(){this.delay=0;clearTimeout(this.interval)},resume:function(){this.delay=this.options.auto||0;this.begin()},handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;
case "touchend":this.onTouchEnd(a);break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "transitionend":this.transitionEnd(a);break;case "resize":this.setup()}},transitionEnd:function(a){this.delay&&this.begin();this.callback(a,this.index,this.slides[this.index])},onTouchStart:function(a){this.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:Number(new Date)};this.isScrolling=void 0;this.deltaX=0;this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=
0},onTouchMove:function(a){if(!(1<a.touches.length||a.scale&&1!==a.scale))if(this.deltaX=a.touches[0].pageX-this.start.pageX,"undefined"==typeof this.isScrolling&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(a.touches[0].pageY-this.start.pageY))),!this.isScrolling)a.preventDefault(),clearTimeout(this.interval),this.deltaX/=!this.index&&0<this.deltaX||this.index==this.length-1&&0>this.deltaX?Math.abs(this.deltaX)/this.width+1:1,this.element.style.MozTransform=this.element.style.webkitTransform=
"translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)"},onTouchEnd:function(){var a=250>Number(new Date)-this.start.time&&20<Math.abs(this.deltaX)||Math.abs(this.deltaX)>this.width/2,b=!this.index&&0<this.deltaX||this.index==this.length-1&&0>this.deltaX;this.isScrolling||this.slide(this.index+(a&&!b?0>this.deltaX?1:-1:0),this.speed)}};
